<div class="container">
    <div class="card">
        <div class="card-body form-group">
            <h3 class="card-title">Company Name: </h3>
            <input class="form-control" [(ngModel)]="currentReport.company" placeholder="Company Name">
        </div>
        <div class="card-body form-group">
            <h3 class="card-title">Methodology:</h3>
            <textarea rows="8" class="form-control" [(ngModel)]="currentReport.methodology"
                      placeholder="Methodology description goes here..."></textarea>
        </div>
        <div class="card-group">
            <div class="card col-sm-8">
                <div class="card-block">
                    <h4 class="card-title">List of vulnerabilities ({{vulnList.length}}):</h4>
                    <div class="form-group">
                        <select (change)="changedVuln(0)" [(ngModel)]="selectedVulnerability" class="form-control"
                                id="vulnSelect">
                            <option *ngFor="let vuln of vulnList" [(ngValue)]="vuln"
                                    [ngClass]="{'highfont': vuln.impactLevel === impactLevels[0]._id,
                                    'medfont': vuln.impactLevel === impactLevels[1]._id,
                                    'lowfont': vuln.impactLevel === impactLevels[2]._id}">{{vuln.title}}
                            </option>
                        </select>
                    </div>

                    <div *ngIf="focusedVuln">
                        <div class="form-group" style="margin-top:10px;">
                            <button type="button" class="btn btn-dark" (click)="permanentAdd()">Add Permanent Vulnerability</button>
                            <button type="button" class="btn btn-dark float-right" (click)="permanentRemove()">Delete Permanently Vulnerability
                            </button>
                        </div>
                        <div class="card-body form-group">
                            <h4 class="card-title">Vulnerability Title: </h4>
                            <input class="form-control" [(ngModel)]="focusedVuln.title">

                            <h4 class="card-title">Impact: </h4>
                            <select [(ngModel)]="focusedVuln.impactLevel" class="form-control col-sm-6"
                                    id="exampleSelect1">
                                <option [(ngValue)]="impact._id" *ngFor="let impact of impactLevels">{{impact.level}}
                                </option>
                            </select>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <h5>Issue Detail: </h5>
                                <textarea rows="4" class="form-control" [(ngModel)]="focusedVuln.issue"
                                          placeholder="Issue detail...">
                    </textarea>
                            </div>
                            <div class="form-group">
                                <h5>Remediation Detail: </h5>
                                <textarea rows="4" class="form-control" [(ngModel)]="focusedVuln.remediation"
                                          placeholder="Remediation detail...">
                    </textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <button type="button" (click)="addVuln()" class="btn btn-dark">Add Vulnerability To Report</button>
                </div>
            </div>
            <div class="card col-sm-4">
                <div class="card-block">
                    <h4 class="card-title">Added vulnerabilities: </h4>
                    <div class="form-group">
                        <select (change)="changedVuln(1)" [(ngModel)]="currentSelectedVulnerabilities" size="10"
                                multiple
                                class="form-control"
                                id="exampleSelect2">
                            <option [(ngValue)]="vuln" *ngFor="let vuln of currentReport.vulns"
                                    [ngClass]="{'highfont': vuln.impactLevel === impactLevels[0]._id,
                                    'medfont': vuln.impactLevel === impactLevels[1]._id,
                                    'lowfont': vuln.impactLevel === impactLevels[2]._id}">
                                {{vuln.title}}
                            </option>
                        </select>
                    </div>
                    <div class="form-group">
                        <button type="button" (click)="removeVuln()" class="btn btn-dark">Remove</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-body form-group">
            <h3 class="card-title">Summary:</h3>
            <textarea rows="8" class="form-control form-dark" [(ngModel)]="currentReport.summary"
                      placeholder="Summary goes here..."></textarea>
        </div>
        <div class="card-body">
            <button type="button" class="btn btn-dark btn-lg" (click)="addReport()">Save report</button>
        </div>

        <button type="button" class="btn btn-outline-dark btn-sm btn-block" (click)="goBack()">Go Back</button>
    </div>
</div>