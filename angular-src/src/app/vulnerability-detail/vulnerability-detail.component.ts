import {Component, Input, OnInit} from '@angular/core';
import {Vulnerability} from '../vulnerability';
import {ReportService} from '../report.service';
import {Impact} from '../impact';

@Component({
    selector: 'app-vulnerability-detail',
    templateUrl: './vulnerability-detail.component.html',
    styleUrls: ['./vulnerability-detail.component.css']
})
export class VulnerabilityDetailComponent implements OnInit {

    @Input() vulnerability: Vulnerability;
    impactLevels: Impact[];

    constructor(private reportService: ReportService) {
    }

    ngOnInit() {
        this.reportService.getImpacts()
            .subscribe(impacts => this.addAndSort(impacts));
    }

    addAndSort(impacts : Impact[]){
        console.log(impacts);
        impacts.sort((n1, n2) => {
            return n1._id - n2._id;
        });
        this.impactLevels = impacts;
        // console.log(this.impactLevels);
        console.log(this.vulnerability);
    }

}
